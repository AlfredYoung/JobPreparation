# 操作系统知识
1. 进程和线程的区别？
> 详见字节面试
2. 进程和线程的通信方式？
> 同上
3. 进程的状态及其转换？
> 详见Linux

4. 线程的同步和互斥？
答：在多线程程序中，线程**同步**和线程**互斥**是确保数据一致性和操作正确性的关键。多线程并发可能会导致**竞态条件**（Race Condition），因此需要使用适当的同步和互斥机制来避免数据竞争。
- 线程同步：确保多个线程按预期的**执行顺序**完成任务，避免操作交错。
- 线程互斥：保证**同一时刻**只有一个线程可以**访问共享资源**，防止数据竞争。
线程实现同步互斥的方法
  - **互斥锁**（Mutex）：保证临界区同一时刻只有一个线程访问。
  - **读写锁**（RWLock）：支持多个读者并发，写操作互斥。
  - **信号量**（Semaphore）：计数器控制资源访问数量。
  - **条件变量**（Condition Variable）：实现线程等待和通知。

5. 内存分区有哪些？
答：
**栈区**（Stack）：函数调用、局部变量，自动管理，生命周期短。
**堆区**（Heap）：动态内存分配，手动 malloc/free。
**数据区**（Data）：全局变量、静态变量，程序生命周期。
**代码区**（Text）：存放程序指令，只读，防止篡改。

6. 虚拟内存的功能？

**定义**：提供比实际物理内存更大的地址空间，通过磁盘与内存映射。
**实现方式**：
- 请求分页（按需加载，减少内存消耗）。
- 页面置换算法（LRU、FIFO、Clock）。

**缺页中断**：当访问的页面不在内存时触发，系统调入新页面。

7. 文件系统的基本概念？
答：
文件（File）：
    - **定义**：文件是存储在磁盘上的数据集合，是文件系统管理的基本单位。
    - **文件类型**：
      - 普通文件
      - 目录文件
      - 设备文件
      - 链接文件
文件系统（File System）：
    - **定义**：文件系统是用于存储、组织、管理和访问文件的软件层，负责数据的持久化和检索。
    - **功能：**
      - 文件命名与组织
      - 空间管理（分配和回收）
      - 文件访问与权限控制
      - 数据一致性与崩溃恢复
8. 什么是 Inode？Inode 包含哪些信息？

答：

**Inode** (Index Node) 是文件系统中的一种数据结构，每个文件或目录都有一个对应的 Inode，负责存储与该文件相关的元数据信息（但不包括文件名和实际数据）。

Inode 结构包含以下关键信息：

**文件类型**（普通文件、目录、符号链接、设备文件等）
**文件权限**（如 rwx，对应 chmod 和 chown）
**文件的大小**（以字节为单位）
**文件所有者** (UID) 和所属组 (GID)
时间戳（atime、mtime、ctime）
atime（Access Time）：文件最近的访问时间
mtime（Modify Time）：文件内容的最后修改时间
ctime（Change Time）：Inode 元数据的更改时间
链接计数（硬链接的数量）
数据块地址（直接索引、间接索引、多级间接索引）
文件标志（文件状态，如是否被锁定）
设备信息（文件所属的存储设备编号）

9. 硬链接和软链接的区别是什么？
答：硬链接：直接指向文件的 **Inode**，软链接：创建一个指向**文件路径**的快捷方式

10.  如何实现文件加锁？如何防止文件被并发修改？
答：在多线程或多进程环境中，为了避免文件被多个程序同时修改造成数据不一致，可以使用文件锁进行同步控制。
  
     -  **共享锁** (Shared Lock)
     -  **独占锁** (Exclusive Lock) 
11. 为什么需要日志文件系统？如何实现崩溃恢复？
答：
- 在传统文件系统中，如果在写入过程中发生系统崩溃（如断电、内核崩溃），可能会导致数据丢失或文件系统不一致。
- 日志文件系统通过记录文件操作的日志，确保在崩溃时可以恢复数据，保证文件系统的一致性。

12. 锁机制？

- 自旋锁：忙等待，适用于临界区短。
- 互斥锁：阻塞等待，适用于临界区长。
- 读写锁：并行读，写操作互斥，适用于读多写少。
- 死锁避免：银行家算法、资源排序、超时锁、尝试锁。

13. 常见系统调用？

| **类别**            | **常见系统调用**                          | **功能**                                   |
|---------------------|-------------------------------------------|--------------------------------------------|
| **进程管理**        | `fork()`、`exec()`、`wait()`、`exit()`     | 创建、执行、终止、等待子进程               |
| **文件管理**        | `open()`、`read()`、`write()`、`close()`   | 打开、读取、写入、关闭文件                 |
| **内存管理**        | `mmap()`、`brk()`、`sbrk()`                | 内存映射、堆区管理                         |
| **设备管理**        | `ioctl()`、`read()`、`write()`              | 操作设备、输入输出                         |
| **网络通信**        | `socket()`、`bind()`、`listen()`、`accept()` | 创建和管理网络连接                         |
| **时间管理**        | `time()`、`gettimeofday()`、`nanosleep()`   | 获取系统时间、延迟                         |
| **用户管理**        | `getuid()`、`setuid()`                      | 获取、设置用户 ID                          |
| **信息管理**        | `uname()`、`sysinfo()`                      | 获取系统信息                               |
| **信号管理**        | `signal()`、`kill()`、`sigaction()`         | 发送、处理信号                             |
| **线程管理**        | `clone()`、`pthread_create()`               | 创建线程、多线程控制                       |
| **同步与互斥**      | `semop()`、`shmget()`、`futex()`             | 信号量、共享内存、锁操作                   |






