# 计算机网络基础知识

## 应用层协议

1. HTTP 协议和 HTTPS协议？
答： **HTTP**（HyperText Transfer Protocol，超文本传输协议）和 **HTTPS**（HyperText Transfer Protocol Secure，安全超文本传输协议）是互联网中最常用的通信协议，主要用于客户端（如浏览器）与服务器之间的数据传输。

2. HTTP 工作原理

    1. 建立连接：
    2. 发送请求：
    3. 处理请求：
    4. 返回响应：
    5. 关闭连接：
3. HTTP请求和响应格式

```bash
请求行：GET /index.html HTTP/1.1
请求头：Host: www.example.com
        User-Agent: Mozilla/5.0
        Accept: text/html
空行：
请求体：（POST/PUT 请求时有数据）
```

```bash
状态行：HTTP/1.1 200 OK
响应头：Content-Type: text/html
        Content-Length: 1024
空行：
响应体：<html>...</html>
```

4. 常见的HTTP状态码

|状态码|响应|
|--|--|
|1xx|信息性响应|
|2xx|成功|
|3xx|重定向|
|4xx|客户端错误|
|5xx|服务端错误|

5. HTTPS协议？
答： **HTTPS**（HyperText Transfer Protocol Secure）是 HTTP 的安全版本，它在 HTTP 的基础上加入了 **SSL/TLS** 加密层，确保数据在传输过程中不会被窃听、篡改和伪造。

6. HTTPS原理？
答：
   1. 建立 TCP 连接：客户端与服务器建立 TCP 连接（通常使用 **443** 端口）。
   2. SSL/TLS 握手：
       - 客户端发送支持的加密算法列表。
       - 服务器返回证书（包含公钥）。
       - 客户端验证证书有效性（CA 认证）。
       - 生成对称密钥并用公钥加密，发送给服务器。
   3. 加密通信：双方使用协商好的密钥进行数据加密传输。
   4. 数据传输：加密的数据在客户端和服务器之间安全传输。
7. HTTPS加密方式？
答： HTTPS 使用混合加密：
- 对称加密（AES、ChaCha20）：加密实际数据，速度快。
- 非对称加密（RSA、ECDSA）：用于密钥交换，保证密钥传输安全。
- 哈希函数（SHA-256）：生成消息摘要，确保数据完整性。

7. RPC协议
答：RPC (Remote Procedure Call) —— 远程过程调用协议，RPC 是一种**跨进程通信**（IPC）方式，允许程序调用另一台计算机上的服务，就像调用本地函数一样，隐藏了网络通信的复杂性。
工作原理概述:
    - 客户端调用本地的Stub（桩代码），传入参数。
    - 序列化（Marshalling）请求数据，打包并通过网络发送。
    - 服务端接收请求，反序列化数据，执行对应方法。
    - 执行结果序列化，返回给客户端。
    - 客户端接收结果，反序列化并返回给调用方。
8. 为什么用RPC协议而不是HTTP REST协议

||RPC|HTTP RESET|
|--|--|--|
|**性能**|基于 TCP，二进制协议，性能更高。|基于 HTTP，文本协议，性能较低。|
|**调用复杂性**|像本地函数调用，支持复杂方法签名。|基于 URI 资源操作，方法调用受限。|
|**数据格式**|支持二进制（Protobuf、Thrift）。|通常使用 JSON，数据体积大。|
|**扩展性**|支持多语言、复杂接口调用。|适合 RESTful 风格的简单操作。|
|**适用场景**|高性能、内部微服务、跨语言调用。|	对外开放 API，兼容性强，易维护。|

9. 从输入URL到浏览器显示结果中间经历了什么？
答：当用户在浏览器中输入 URL 并回车后，首先进行** DNS 解析**，将域名转换为 IP 地址，接着通过 **TCP 三次握手**（HTTPS 还需 TLS/SSL 握手）与服务器建立连接。然后，浏览器发送 **HTTP 请求**，服务器接收请求后处理，可能涉及数据库操作，生成并返回 **HTTP 响应**。浏览器接收响应后，解析 HTML 构建 DOM 树，解析 CSS 生成样式，执行 JavaScript，完成 布局（Layout） 和 绘制（Painting），最终将页面呈现给用户。期间，浏览器还会异步加载资源，处理用户交互，必要时更新页面。

10. 三次握手的原因
答：

- 确保双方通信能力：验证客户端和服务器都能接收与发送数据。
- 防止重复连接：避免历史的延迟数据包（如 SYN 包）被误认为是新的连接请求，导致连接异常。
11. 四次挥手的原因
答：
- 保证数据的完整性：TCP 是全双工通信，需要双方独立关闭，确保数据完全传输。
- 防止数据丢失：客户端进入 TIME_WAIT 状态，避免服务器未接收最后的 ACK，导致连接未正常关闭。

12. HTTP 1.0 和 HTTP 1.1 和 HTTP 2.0的区别？

|特性|HTTP 1.0| HTTP 1.1| HTTP 2.0|
|--|--|--|--|
|连接管理|短连接|长连接|多路复用|
|数据格式|文本|文本|二进制|
|请求并发|不支持|支持管道化|支持多路复用|
|头部压缩|无|无|HPACK 算法压缩头部|


13.  TCP建立连接的过程？
答： TCP 建立连接的过程（三次握手）：

- 第一次握手：客户端向服务器发送 SYN 标志的数据包，表示请求建立连接，携带客户端的初始序列号 (seq=x)。
- 第二次握手：服务器接收请求，回复带有 SYN + ACK 标志的数据包，确认客户端的请求 (ack=x+1)，并携带自己的初始序列号 (seq=y)。
- 第三次握手：客户端收到确认后，发送 ACK 标志的数据包，确认服务器的序列号 (ack=y+1)，至此连接建立成功。

14.  TCP拆除连接的过程？
答：

- 第一次挥手：客户端向服务器发送 FIN 标志的数据包，表示数据发送完毕，申请关闭连接。
- 第二次挥手：服务器收到后，返回 ACK 标志的数据包，确认收到关闭请求，但此时仍可能有数据未发送完毕。
- 第三次挥手：服务器完成数据发送后，向客户端发送 FIN 标志的数据包，申请关闭连接。
- 第四次挥手：客户端收到后，发送 ACK 标志的数据包，确认关闭，进入 TIME_WAIT 状态，等待一段时间确保服务器已收到确认，之后彻底关闭连接。

15. QUIC协议介绍？
答：
- 基于 UDP 实现；
- 多路复用，解决队头阻塞（HoL Blocking）；
- 0-RTT 快速建立连接；
- 集成 TLS 1.3，增强安全性
- 更好的丢包处理；
- 连接迁移。
